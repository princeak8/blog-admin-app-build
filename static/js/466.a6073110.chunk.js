"use strict";(self.webpackChunkblog_admin_app=self.webpackChunkblog_admin_app||[]).push([[466],{5346:function(e,t,n){n(9434),n(8519),n(4238),n(184)},1466:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var r=n(2982),s=n(4165),o=n(5861),a=n(1413),i=n(885),c=n(2791),u=n(9434),l=n(1358),d=n(2372),p=n(3279),h="Posts_container__Mfd9a",b="Posts_action_button__LAnmD",f=(n(5346),n(6871)),g=(n(7892),n(184)),Z=function(e){var t="mt-5";return"reports"===e.styling&&(t=null),(0,g.jsx)("table",{className:"".concat(e.styling," table table-borderless table-hover ").concat(t),hidden:e.hidden,children:e.children})},m=n(2851),x=n(6500),v=function(){var e=(0,u.I0)(),t=(0,c.useContext)(d.Z),n=t.token,v=t.domain,P=(0,c.useState)(!1),j=(0,i.Z)(P,2),C=j[0],k=j[1],y=(0,u.v9)((function(e){return e.postsDisplay.allPosts})),w=(0,f.s0)(),_=function(){var t=(0,o.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k(!0),t.next=3,m.Z.deletePost(r,v,n);case 3:if(t.sent.ok){t.next=6;break}return t.abrupt("return",console.log("delete failed"));case 6:e(x.r.deletePost(r)),k(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),H=function(){var t=(0,o.Z)((0,s.Z)().mark((function t(r){var o;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k(!0),t.next=3,m.Z.togglePublish(r,v,n);case 3:if((o=t.sent).ok){t.next=6;break}return t.abrupt("return",console.log("toggle publish error"));case 6:e(x.r.updatePost(o.data.data)),k(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=(0,c.useMemo)((function(){return[{Header:"Title",accessor:"title"},{Header:"Category",accessor:"category"},{Header:"Published",accessor:"published",Cell:function(e){return 1==e.value?"Published":"Not Published"}},{Header:"Visible",accessor:"visible",Cell:function(e){return 1==e.value?"Visible":"Not Visible"}},{Header:"Created",accessor:"created_at"}]}),[]),T=(0,c.useMemo)((function(){return(0,r.Z)(y)}),[y]),D=(0,l.useTable)({columns:N,data:T},(function(e){e.visibleColumns.push((function(e){return[].concat((0,r.Z)(e),[{id:"Publish",Header:"Call to Action",Cell:function(e){var t=e.row;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("button",{type:"button",className:"btn ".concat(b),onClick:function(){return e=t.original,void w("/admin/posts/".concat(e.id),{state:(0,a.Z)({},e)});var e},children:"Edit"}),(0,g.jsx)("button",{type:"button",className:"btn ".concat(b),onClick:function(){return H(t.original.id)},children:t.original.published?"Take Down":"Publish"}),(0,g.jsx)("button",{type:"button",className:"btn ".concat(b),onClick:function(){return _(t.original.id)},children:"Delete"})]})}}])}))})),M=D.getTableProps,V=D.getTableBodyProps,A=D.headerGroups,F=D.rows,G=D.prepareRow;return(0,g.jsxs)(g.Fragment,{children:[C&&(0,g.jsx)(p.Z,{}),(0,g.jsxs)("div",{className:h,children:[(0,g.jsx)("h1",{children:"Posts"})," ",(0,g.jsx)("button",{type:"button",onClick:function(){return w("/admin/posts/add")},children:"Create new Post"}),0!==y.length?(0,g.jsxs)(Z,(0,a.Z)((0,a.Z)({styling:"reports"},M()),{},{children:[(0,g.jsx)("thead",{children:A.map((function(e){return(0,g.jsx)("tr",(0,a.Z)((0,a.Z)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return(0,g.jsx)("th",(0,a.Z)((0,a.Z)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),(0,g.jsx)("tbody",(0,a.Z)((0,a.Z)({},V()),{},{children:F.map((function(e){return G(e),(0,g.jsx)("tr",(0,a.Z)((0,a.Z)({},e.getRowProps()),{},{children:e.cells.map((function(e,t){return(0,g.jsxs)("td",(0,a.Z)((0,a.Z)({},e.getCellProps()),{},{children:[" ",e.render("Cell")]}))}))}))}))}))]})):(0,g.jsx)("div",{children:"You have made no posts"})]})]})}}}]);
//# sourceMappingURL=466.a6073110.chunk.js.map